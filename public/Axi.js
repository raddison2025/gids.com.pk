function assert(e,t,i,r){r=r||!1,t=t||{};var n="";for(var a in t)t.hasOwnProperty(a)&&(n+="var "+a+" = "+t[a].toSource()+";\n");var o=new Function(n+"return ("+e+");"),l=!1;try{l=o.apply(i)}catch(e){}try{if(!l)throw new Error("ECMAScript assertion failed:  ("+e+")")}catch(e){if(r)throw"undefined"!=typeof Error?new Error(e.message+" stack:\n"+e.stack):e;var s="Warning: "+e.message;e.stack&&(s+=" stack:\n"+e.stack);for(a in t)s+=a+" = "+t[a]+"\n";s+="\n",alert(s)}return l}function assert(){}Ext.namespace("Axi","Axi.Util"),"undefined"!=typeof console&&console.log||(console={},console.log=Ext.emptyFn),function(){Axi.CollectGarbage=function(){Axi.gcLock&&window.clearTimeout(Axi.gcLock),Axi.gcLock=function(){Axi.Autorefresh.refresh(function(){Ext.Element.garbageCollect(),Axi.gcLock=null})}.defer(500)},Axi.collect=function(){Axi.gcLock&&window.clearTimeout(Axi.gcLock),Axi.gcLock=function(){Ext.Element.garbageCollect(),Axi.gcLock=null}.defer(500)}}(),Array.prototype.map||(Array.prototype.map=function(e){var t=this.length;if("function"!=typeof e)throw new TypeError;for(var i=new Array(t),r=arguments[1],n=0;n<t;n++)n in this&&(i[n]=e.call(r,this[n],n,this));return i}),Function.prototype.createLocker||(Function.prototype.createLocker=function(e,t){function i(o){if(1!=arguments.length||"object"!=typeof arguments[0]||"boolean"!=typeof arguments[0].doIt){r=arguments;var l=!1}else var l=o.doIt;n&&(window.clearTimeout(n),n=null),l?(a.apply(t,r),r=null,n=null):n=function(){i.call(this,{doIt:!0})}.defer(e,this)}e=e||500,t=t||this;var r=null,n=null,a=this;return i}),Axi.restoreFocus=function(){var e=$APP.getViewMgr().getComponent().getActiveTab();e&&"function"==typeof e.returnFocus&&e.returnFocus()},Axi.Util.createStyleSheet=function(e,t,i){var r=e.getElementsByTagName("head")[0],n=e.createElement("style");n.setAttribute("type","text/css"),i&&n.setAttribute("id",i);try{n.appendChild(e.createTextNode(t))}catch(e){n.cssText=t}return r.appendChild(n),n.styleSheet?n.styleSheet:n.sheet||e.styleSheets[e.styleSheets.length-1]},Axi.Util.MsgBox=function(e,t){var i=Ext.Msg.OK,r={ok:$T("OK")};switch(e.buttons){case"yesno":i=Ext.Msg.YESNO,r={yes:e.yesText||$T("Yes"),no:e.noText||$T("No")};break;case"yesnocancel":i=Ext.Msg.YESNOCANCEL,r={yes:e.yesText||$T("Yes"),no:e.noText||$T("No"),cancel:e.cancelText||$T("Cancel")};break;case"ok":i=Ext.Msg.OK,r={ok:e.okText||$T("OK")}}Ext.MessageBox.buttonText=r,Ext.MessageBox.getDialog().el.dom.className="x-window x-window-plain x-window-dlg";var n=e.disableAppKeymap||!1;n&&$APP.getKeyMap().disable();var a=new Ext.KeyMap(e.keyMapEl||document,[{key:[Ext.EventObject.ESC],fn:function(e,t){t.ctrlKey||t.shiftKey||(Ext.Msg.getDialog().close(),a.disable(),n&&$APP.getKeyMap().enable())},stopEvent:!0,scope:this}]),o={title:e.title,cls:e.cls?e.cls:"x-axi-window x-axi-message x-axi-darkbrown-button x-axi-empty-folder-window",closable:!1,width:e.width||600,height:e.height||400,msg:e.msg,buttons:i,fn:function(i){switch(i){case"ok":case"yes":"function"==typeof e.yesHandler&&e.yesHandler.call(t);break;case"no":"function"==typeof e.noHandler&&e.noHandler.call(t);break;case"cancel":"function"==typeof e.cancelHandler&&e.cancelHandler.call(t)}a.disable(),n&&$APP.getKeyMap().enable()},scope:t},l=Ext.Msg.show(o);buttons=l.getDialog().buttons,l.getDialog().focus();for(var s=0;s<buttons.length;++s){var c=buttons[s];Ext.DomQuery.selectNode("button",c.el.dom).tabindex=1e3+s,Ext.EventManager.on(c.el,"keydown",function(e,t){if(!(e.getKey()!=e.RIGHT&&e.getKey()!=e.TAB||e.ctrlKey||e.shiftKey)){e.stopEvent();for(var i=t.tabindex-1e3+1,r=!0;i<=buttons.length&&r;)i==buttons.length&&(i=0),buttons[i].hidden||(r=!1,buttons[i].focus()),i++}if(e.getKey()==e.LEFT&&!e.ctrlKey&&!e.shiftKey||e.getKey()==e.TAB&&!e.ctrlKey&&e.shiftKey){e.stopEvent();for(var i=t.tabindex-1e3-1,r=!0;i>=-1&&r;)-1==i&&(i=buttons.length-1),buttons[i].hidden||(r=!1,buttons[i].focus()),i--;e.stopEvent()}},this)}return l},Axi.Util.eqArrays=function(e,t){e=e.slice(),t=t.slice();if(!Ext.isArray(e)||!Ext.isArray(t))return!1;if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++){if(-1===t.indexOf(e[i]))return!1;t=t.remove(e[i])}return!t.length},Axi.Util.eqValues=function(e,t){var i=!1;return Axi.Util.each(e,function(e,r){"folder"!=e&&("fullName"==e||"fullNameRaw"==e?t[e]==r||""==r&&t[e]==$T("EnterFullName")||""==t[e]&&r==$T("EnterFullName")||(i=!0):"subject"==e?t[e]==r||""==r&&t[e]==$T("ComposerEmptySubject")||""==t[e]&&r==$T("ComposerEmptySubject")||(i=!0):"name"==e?t[e]==r||""==r&&t[e]==$T("DListEnterName")||""==t[e]&&r==$T("DListEnterName")||(i=!0):t[e]!=r&&(i=!0))}),i},Axi.Util.setFocusComponent=function(e){for(var t=e.find("ftag","x-axi-textfield"),i=0;i<t.length;++i){var r=t[i];r.on("focus",function(){e.focusedComponent=this},r)}var n=e.find("xtype","axi-htmleditor")[0];n&&n.on("focus",function(){e.focusedComponent=this},n)},Axi.Util.isObjectEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},Axi.Util.compareObjectsLE=function(e,t){if(typeof e!=typeof t)return!1;if(null===e&&null===t)return!0;if(null===e||null===t)return!1;if("object"==typeof e){if("function"==typeof e.hasOwnProperty)for(var i in e)if(e.hasOwnProperty(i)){if(!t.hasOwnProperty(i)||typeof e[i]!=typeof t[i])return!1;if(!Axi.Util.compareObjectsLE(e[i],t[i]))return!1}return!0}if("string"==typeof e&&(1==e.length||1==t.length)){return e.replace("​","")===t.replace("​","")}return t===e},Axi.Util.getNodePosition=function(e,t){var i,r=[];if(!e)return[];for(;e&&e!==t;){for(i=0;e.previousSibling;)e=e.previousSibling,i++;r.push(i),e=e.parentNode}return r.reverse()},Axi.Util.findNodeByPosition=function(e,t){return t.forEach(function(t){e&&(e=e.childNodes[t])}),e},Axi.Util.compareObjectsEQ=function(e,t){return Axi.Util.compareObjectsLE(e,t)&&Axi.Util.compareObjectsLE(t,e)},Axi.extend=function(e,t){var i=e.prototype,r=e;return Ext.extend(e,t,Ext.apply(i,{constructor:r})),e},Axi.getErrorString=function(e,t,i){return e?i?i.detail&&i.detail.lastError?i.detail.lastError:i.lastError?i.lastError:"UNKNOWN_ERROR":/^\s*false\s*$/.test(t)?"HE_NOENT":null:"HE_CONNECTION"},Axi.getLastError=function(e){return e?e.detail&&e.detail.lastError?e.detail.lastError:e.lastError?e.lastError:"UNKNOWN_ERROR":null},Axi.getErrorFields=function(e){if(e){if(e.detail&&e.detail.errorFields)return e.detail.errorFields;if(e.errorFields)return e.errorFields}return null},Axi.Util.stripQuotes=function(e){return e?e.replace(/\\"|&quot;/g,""):""},Axi.Util.IECopyToClipboard=function(e){window.clipboardData&&window.clipboardData.setData&&window.clipboardData.setData("Text",e)},Axi.Util.MozCopyToClipboard=function(e){try{if(!netscape.security.PrivilegeManager.enablePrivilege)return void(clipdata=e);netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(t){return void(clipdata=e)}var t=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);t.data=e;var i=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!i)return!1;i.addDataFlavor("text/unicode"),i.setTransferData("text/unicode",t,2*e.length);var r=Components.interfaces.nsIClipboard,n=Components.classes["@mozilla.org/widget/clipboard;1"].getService(r);if(!n)return!1;n.setData(i,null,r.kGlobalClipboard)},Axi.Util.selectElement=function(e){if(document.selection){var t=document.body.createTextRange();t.moveToElementText(e),t.setEndPoint("EndToEnd",t),t.moveStart("character",0),t.moveEnd("character",1),t.select()}else{var t=document.createRange();t.setStartBefore(e),t.setEndAfter(e);var i=window.getSelection();i.removeAllRanges(),i.addRange(t)}},Axi.Util.getDocument=function(e){try{var t=window.frames[e.name];return e.contentDocument||t.document}catch(e){return null}},Axi.Util.updateIframe=function(e,t,i){try{var r=Axi.Util.getDocument(e);if(r.open(),r.write(t),r.close(),e.border=0,e.frameBorder=0,r.body.style.border="0","object"==typeof i)for(var n in i)i.hasOwnProperty(n)&&(r.body.style[n]=i[n])}catch(e){}},Axi.Util.loadScript=function(e,t){if(Ext.isReady){var i=document.createElement("script");i.type="text/javascript",i.nonce=Axi.AccountInfo.SCRIPT_NONCE,i.src=e+Axi.AccountInfo.resourceSuffix,t&&(document.all?i.onreadystatechange=function(){!this.readyState||"complete"!=this.readyState&&"loaded"!=this.readyState||t()}:i.onload=t),document.getElementsByTagName("head")[0].appendChild(i)}else document.write('<script type="text/javascript" nonce="'+Axi.AccountInfo.SCRIPT_NONCE+'" src="'+e+Axi.AccountInfo.resourceSuffix+'"><\/script>')},Axi.Util.loadClass=function(e,t){var i="private/ajax/Classes/"+e+".js";if(Axi.Config&&Axi.Config.Classes[e]){var r=Axi.Config.Classes[e].folder;r&&(i="private/ajax/Classes/"+r+"/"+e+".js");var n=Axi.Config.Classes[e].requires;if(n){Axi.Config.Classes[e].loaded=Axi.Config.Classes[e].loaded||{};for(var a=Axi.Config.Classes[e].loaded,o=0;o<n.length;++o){var l=n[o];if(!a[l])return Axi.Util.loadClass(l,function(){Axi.Config.Classes[e].loaded[l]=!0,Axi.Util.loadClass(e,t)})}}}Axi.Util.loadScript(i,t)},Axi.Util.loadPlugin=function(e){var t="private/ajax/Libraries/Axi/Plugins/"+e+".js";Axi.Util.loadScript(t)},Axi.Util.loadExtension=function(e){var t="private/ajax/Libraries/Axi/Extensions/"+e+".js";Axi.Util.loadScript(t)},Axi.Util.loadUIPlugin=function(e){function t(){var t=new Axi.UI[e.name];t.init.apply(e.context?e.context:t,e.args),e.blocking&&$PSTOP(),e.onLoad&&e.onLoad(e)}function i(){e.blocking&&$PSTOP(),e.onError?e.onError(e):Ext.Msg.alert("Error","There was an error while retrieving the dialog!")}e.blocking&&$PSTART("Please wait while the "+name+" dialog is loading...");var r=document.createElement("script");return r.type="text/javascript",r.nonce=Axi.AccountInfo.SCRIPT_NONCE,r.src="private/ajax/Classes/"+e.name+".js"+Axi.AccountInfo.resourceSuffix,document.all?r.onreadystatechange=function(){if(this.readyState&&("complete"==this.readyState||"loaded"==this.readyState))return Axi.UI[e.name]?void t():i()}:(r.onload=t,r.onerror=i),void document.getElementsByTagName("head")[0].appendChild(r);var n},Axi.Util.loadDictionary=function(e,t){var i="private/ajax/i18N/"+e+".js";Axi.Util.loadScript(i,t)},Axi.Util.loadTemplate=function(e,t){var i="private/ajax/Resources/templates/"+e+".tpl";Ext.Ajax.request({url:i+Axi.AccountInfo.resourceSuffix,success:function(e){t(new Ext.Template(e.responseText))}})},Axi.Util.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},Axi.Util.loadContent=function(e,t){void 0===Axi.Presets.Template&&Axi.Util.createTPL(),Axi.Util.loadTemplate(e,function(e){var i=e.apply(Axi.Presets.Template);t(i)})},Axi.Util.loadCSS=function(e,t,i,r){r=r||"",r&&(r=r.replace(/(^\/+)|(\/$)/g,""),r+="/"),i&&(r="theme-"+Axi.AccountInfo.theme+"/"+r);var n=[];n.push("private/ajax/Resources/css/"+r+e+".css");for(var a=0;a<n.length;a++){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=n[a]+Axi.AccountInfo.resourceSuffix,t&&(o.href+="?_dc="+(new Date).getTime()),document.body.appendChild(o)}},Axi.Util.loadComponentCSS=function(e,t,i){return i||(i=!1),Axi.Util.loadCSS(e,t,i,"components")},Axi.Util.getCSSPath=function(e,t){var i="/private/ajax/Resources/css/";return t&&(i+="theme-"+Axi.AccountInfo.theme+"/theme-"+Axi.AccountInfo.theme+"-"),i+e},Axi.Util.padString=function(e,t,i){var r=""+e;for(i=""+i;r.length<t;)r=i+r;return r},Axi.Util.getImagePath=function(e,t){var i="/private/ajax/Resources/images/";return(i+=t?"axitheme-"+Axi.AccountInfo.theme+"/":"axitheme-ocean/")+e},Axi.Util.forceCacheUrl=function(e,t){t=t||"";var i=Axi.AccountInfo.ForceCacheTimeout||3e5,r=(new Date).getTime(),n=Axi.appTS+"_"+Axi.cacheVer;return e+"&forced="+parseInt(r/i)+"_"+n+t},Axi.Util.preloaderStart=function(e){if(Axi.Util._preloaderT0=(new Date).getTime(),e=e||{},e.msg=e.msg||$T("Loading"),e.msgCls=e.msgCls||"x-mask-loading top-mask",!Axi.Util._loadMask){e.msg='<div class="wrapp"><div class="loading-spinner small"><svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="6" stroke-miterlimit="10"></circle></svg></div><span class="msg-text">'+e.msg+"</span></div>";var t=document.createElement("div");t.style.position="absolute",t.style.top=0,t.style.left="50%",e.width&&(t.style.width=e.width+"px"),t.style.padding=0,t.style.margin=0,t.style.border=0,document.body.appendChild(t),Axi.Util._loadMask=new Ext.LoadMask(t,{msg:e.msg,msgCls:e.msgCls})}Axi.Util._loadMask.el.addClass("x-axi-loading-mask"),0==Axi.Messenger.getInstance().getCounter()&&(Axi.Util._loadMask.show(),Axi.Util._loadMask.el._mask.setSize(1,1),Axi.Util._loadMask.el.dom.style.marginLeft=-Axi.Util._loadMask.el.getWidth()/2+"px"),Axi.Util._loadMaskStarted=!0},Axi.Util.isPreloaderStarted=function(){return!!Axi.Util._loadMaskStarted},Axi.Util.preloaderStop=function(e){Axi.Util._preloaderT1=(new Date).getTime(),Axi.Util._loadMask&&(Axi.Util._loadMask.hide(),Axi.Util._loadMask.el.removeClass("x-axi-loading-mask"),Axi.Util._loadMaskStarted=!1,e&&(Axi.Util._loadMask.destroy(),Axi.Util._loadMask=null))},Axi.Util.applyLoadMask=function(e,t,i){var r;return i=i||{},i.msg=i.msg||$T("Loading"),i.msg='<div class="wrapp"><div class="loading-spinner small"><svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="6" stroke-miterlimit="10"></circle></svg></div><span class="msg-text">'+i.msg+"</span></div>",i.onBeforeLoad=function(){r.el.addClass("x-axi-loading-mask"),Ext.LoadMask.prototype.onBeforeLoad.apply(r)},i.onLoad=function(){r.el.removeClass("x-axi-loading-mask"),Ext.LoadMask.prototype.onLoad.apply(r)},r=new Ext.LoadMask(t,i),e&&(Ext.apply(e,{showLoadMask:function(){r.show()}.createDelegate(e),hideLoadMask:function(){r.hide()}.createDelegate(e)}),e.enableLoadMask&&e.showLoadMask()),r},Axi.Util.restrictedMode=function(){var e=Ext.DomQuery.selectNode("body"),t=Ext.DomQuery.selectNode("#IDRegionNorth"),i=Ext.fly(e).getWidth(),r=Ext.fly(e).getHeight()-Ext.fly(t).getHeight(),n=0,a=Ext.fly(t).getHeight(),o=document.createElement("div");Ext.fly(o).setStyle({position:"absolute",zIndex:9e3,left:n,top:a,width:i,height:r,backgroundColor:"#ecece5"}),Ext.fly(o).setOpacity(.75),e.appendChild(o);var n=document.createElement("div");Ext.fly(n).setStyle({position:"absolute",zIndex:9001,left:i/2-32,top:r/2-32,width:64,height:64,background:"url("+Axi.Util.getImagePath("restricted-mode.png")+") no-repeat center center"}),e.appendChild(n)},document.all||Ext.isIE11,Axi.Util.formatName=function(e){var t=e.firstname||"",i=e.middlename||"",r=e.lastname||"",n=e.address||"",a=t+" "+i+" "+r;return a=Axi.Util.stripQuotes(a.trim()).replace("  "," "),"last"==$SESSION.get("ContactNameFormat")&&(a=Axi.Util.normalToReversedFullName(a)),n&&a?a=a+" ("+n+")":n&&(a=n),a.trim()},Axi.Util.timer=function(e){var t=Axi.Util.timer=Axi.Util.timer||{};if(t[e]){var i=(new Date).getTime();console.log(e,(i-t[e])/1e3+"s"),t[e]=null,delete t[e]}else t[e]=(new Date).getTime()},Axi.Util.bench=function(e,t){function i(){new Axi.UI.Settings;a=new Date,r.push(a.getElapsed(o)/1e3)}for(var r=[],n=0;n<e;++n){var a,o=new Date,l=document.createElement("script");l.type="text/javascript",l.nonce=Axi.AccountInfo.SCRIPT_NONCE,l.src="private/ajax/Classes/Settings.js"+Axi.AccountInfo.resourceSuffix,document.all?l.onreadystatechange=function(){!this.readyState||"complete"!=this.readyState&&"loaded"!=this.readyState||i()}:l.onload=i,document.getElementsByTagName("head")[0].appendChild(l)}var s=function(){if(e>r.length)return void window.setTimeout(s,50);for(var i="Number of iterations: "+r.length+"\n",n=0,a=0;a<r.length;++a)n+=r[a];n/=r.length,i+="Average: "+n+"s\n",t(i)};s()},Axi.Util.register=function(e){if(e.register&&e.register.length)for(var t=0;t<e.register.length;++t)if(this==e.register[t])return;e.register=e.register||[],e.register.push(this),Ext.util.Observable.capture(e,function(e,t){if(-1==e.indexOf("AXI_EVENTS_"))return!0;this.fireEvent(e,t)},this)},Axi.Util.unregister=function(e){e.register=null,Ext.util.Observable.releaseCapture(e)},Axi.Util.each=function(e,t){for(var i in e)e.hasOwnProperty(i)&&t(i,e[i])},Axi.Util.normalize=function(e){return e.toLowerCase().replace(/-/g,"_")},Axi.Util.makeCellSelectable=function(e,t){if(!e||!t)return!1;for(var i="td.x-grid3-col.x-grid3-td-"+t,r=Ext.DomQuery.select(i,e.body.dom),n=0;n<r.length;++n)r[n].style.MozUserSelect="text"},Axi.Util.translateQuota=function(e,t){var i=100*e/t,r=new Number(i).toFixed(1);0==r&&(r=$T("STILessThan01"));var n=1024,a=1048576,o=1024*a,l="KB";t>=o?(t/=o,l="TB"):t>=a?(t/=a,l="GB"):t>=n&&(t/=n,l="MB");var s="KB";return e>=o?(e/=o,s="TB"):e>=a?(e/=a,s="GB"):e>=n&&(e/=n,s="MB"),{totalQuota:new Number(t).toFixed(1),totalUnit:$T("Unit_"+l),usedQuota:new Number(e).toFixed(1),usedUnit:$T("Unit_"+s),percent:r}},Axi.Util.translateSize=function(e){var t=1048576,i=1024*t,r=1024*i,n="B";if(e>=r)e/=r,n="TB";else if(e>=i)e/=i,n="GB";else if(e>=t)e/=t,n="MB";else{if(!(e>=1024))return{convertedSize:new Number(e),usedUnit:$T("Unit_"+n)};e/=1024,n="KB"}return{convertedSize:new Number(e).toFixed(1),usedUnit:$T("Unit_"+n)}},Axi.Util.sprintf=function(e){for(var t=arguments.length-1,i="",r="",n=0;n<t;++n)i+="(.*)%%",r+="$"+(n+1)+arguments[n+1];return i+="(.*)",r+="$"+(n+1),e.replace(new RegExp(i),r)},Axi.Util.dump=function(e){Axi.Util.dump.buf||(Axi.Util.dump.buf="");var t=Axi.Util.dump.buf;"string"==typeof e?t+=e+"<br/>":Axi.Util.each(e,function(e,i){t+=e+" -> "+i+"<br/>"});var i=document.getElementById("axi_debug_console");i?i.style.visibility="visible":(i=document.createElement("div"),i.id="axi_debug_console",i.style.position="absolute",i.style.zIndex=1e3,i.style.bottom="0",i.style.left="0",i.style.width="100%",i.style.height="33%",i.style.overflow="scroll",i.style.backgroundColor="#EEEEEE",i.style.borderColor="#CCCCCC",i.style.color="#333333",document.body.appendChild(i)),i.innerHTML=t,function(e){var t=document.createElement("div");t.style.position="absolute",t.style.zIndex=1e3,t.style.top="0",t.style.right="0",t.style.padding="2px",t.style.backgroundColor="#666666",t.style.borderColor="#333333",t.style.color="#FFFFFF",t.style.cursor="pointer",t.innerHTML="Close",t.onclick=function(){e.style.visibility="hidden"},e.appendChild(t)}(i),Axi.Util.dump.buf=t},Axi.Util.stopPropagation=function(e){e=e||window.event,e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},Axi.Util.setCookie=function(e,t,i){var r=i||365,n=new Date;n.setTime(n.getTime()+864e5*r);var a="; expires="+n.toGMTString();document.cookie=e+"="+escape(t)+a},Axi.Util.getCookie=function(e){for(var t=document.cookie.split(";"),i=0;i<t.length;i++){var r=t[i].split("=");if(e==r[0].trim())return unescape(r[1])}return null},Axi.Util.removeCookie=function(e){document.cookie=e+"=0; expires=Wed, 16 Apr 1980 21:50:51 GMT;"},Axi.Util.htmlToRawText=function(e){e=e.replace(/<blockquote[^>]*>/gi,"<blockquote>%%AXI#BQ%%");var t=e.split(/<blockquote[^>]*>|<\/blockquote[^>]*>/i);e="";for(var i=0;i<t.length;++i){var r=t[i];0==r.indexOf("%%AXI#BQ%%")&&(r=r.replace("%%AXI#BQ%%","&gt;&nbsp;"),r=r.replace(/<br[^>]*>/gi,"<br />&gt;&nbsp;")),e+=r}e=e.replace(/<li[^>]*>/gi,"* "),e=e.replace(/<li[^>]*>/gi,"<br />*"),e=e.replace(/<ul[^>]*><br[^>]*>/gi,""),e=e.replace(/<\/p[^>]*>/gi,"<br />"),e=e.replace(/<br[^>]*>/gi,"%%AXI#BR%%"),e=e.replace(/<span[^>]*>\|<\/span>/,""),e=e.replace(/<style[^>]*>.*<\/style[^>]*>/gim,"");var n=e.replace(/<[^>]*>/g,"").replace(/<\/[^>]*>/g,"");return n=n.replace(/%%AXI#BR%%/g,"<br />"),n=n.replace(/<br[^>]*>/gi,"\n").replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&nbsp;/gi," ").replace(/&amp;/gi,"&")},Axi.Util.htmlToText=function(e){e=e.replace(/<img[^>]*>/gi,""),e=e.replace(/<blockquote[^>]*>/gi,"<blockquote>%%AXI#BQ%%");var t=e.split(/<blockquote[^>]*>|<\/blockquote[^>]*>/i);e="";for(var i=0;i<t.length;++i){var r=t[i];0==r.indexOf("%%AXI#BQ%%")&&(r=r.replace("%%AXI#BQ%%","&gt;&nbsp;"),r=r.replace(/<br[^>]*>/gi,"<br />&gt;&nbsp;")),e+=r}e=e.replace(/(\s*<p[^>]*>\s*<\/p[^>]*>\s*)+/gi,"%%AXI#EMPTY_BLOCK%%"),e=e.replace(/(\s*<div[^>]*>\s*<\/div[^>]*>\s*)+/gi,"%%AXI#EMPTY_BLOCK%%"),e=e.replace(/%%AXI#EMPTY_BLOCK%%\s*<p[^>]*>/gi,"<p>"),e=e.replace(/%%AXI#EMPTY_BLOCK%%\s*<div[^>]*>/gi,"<div>"),e=e.replace(/<\/p[^>]*>\s*%%AXI#EMPTY_BLOCK%%/gi,"</p>"),e=e.replace(/<\/div[^>]*>\s*%%AXI#EMPTY_BLOCK%%/gi,"</div>"),e=e.replace(/%%AXI#EMPTY_BLOCK%%/gi,"<br>"),e=e.replace(/<div[^>]*><br[^>]*><\/div[^>]*>/gi,"<br><br>"),e=e.replace(/<br[^>]*>\s*<\/div[^>]*>/gi,"</div>"),e=e.replace(/<br[^>]*>\s*<\/p[^>]*>/gi,"</p>"),e=e.replace(/<div[^>]*>\s*<\/div[^>]*>/gi,"<br>"),e=e.replace(/<\/div[^>]*>\s*<div[^>]*>/gi,"<br>"),e=e.replace(/<\/p[^>]*>\s*<p[^>]*>/gi,"<br>"),e=e.replace(/<br[^>]*>\s*<div[^>]*>/gi,"%%AXI#IGNORED_BR%%<div>"),e=e.replace(/<\/div[^>]*>\s*<br[^>]*>/gi,"</div>"),e=e.replace(/<br[^>]*>\s*<p[^>]*>/gi,"%%AXI#IGNORED_BR%%<p>"),e=e.replace(/([^\s]+[\s]*)<div[^>]*>/gi,"$1<br><div>"),e=e.replace(/<\/div[^>]*>/gi,"</div><br>"),e=e.replace(/<\/div[^>]*>\s*<p[^>]*>/gi,"<br>"),e=e.replace(/([^\s]+[\s]*)<p[^>]*>/gi,"$1<br><p>"),e=e.replace(/<\/p[^>]*>/gi,"</p><br>"),e=e.replace(/%%AXI#IGNORED_BR%%/g,""),e=e.replace(/<li[^>]*>/gi,"<li> * "),e=e.replace(/<li[^>]*>/gi,"<br /><li>"),e=e.replace(/<ul[^>]*><br[^>]*>/gi,"<ul>"),e=e.replace(/<br[^>]*>/gi,"%%AXI#BR%%"),e=e.replace(/<span[^>]*>\|<\/span>/,""),e=e.replace(/<style[^>]*>.*<\/style[^>]*>/gim,"");var n=e.replace(/<[^>]*>/g,"").replace(/<\/[^>]*>/g,"");return n=n.replace(/%%AXI#BR%%/g,"<br />"),n=n.replace(/<br[^>]*>/gi,"\n").replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&nbsp;/gi," ").replace(/&amp;/gi,"&"),n=n.replace(/&#([0-9]*);/gi,function(){return String.fromCharCode(arguments[1])})},Axi.Util.textToHtml=function(e){return"string"!=typeof e?String(e):e.replace(/&/gi,"&amp;").replace(/ /gi,"&nbsp;").replace(/>/gi,"&gt;").replace(/</gi,"&lt;").replace(/\r?\n/gi,"<br />")},Axi.Util.sliceText=function(e,t){var i,r;return e.length<t?e:(i=e.slice(0,t+1),/\B/.test(i[t])?i.slice(0,t):(r=i.split(/\W/),i.slice(0,-r[r.length-1].length-1)))},Axi.Util.escape=function(e){return e=e||"",e=e.replace(/&/g,"&amp;"),e=e.replace(/\"/g,"&quot;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;")},Axi.Util.unescape=function(e){return e=e||"",e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&amp;/g,"&"),e=e.replace(/&quot;/g,'"')},Axi.Util.escapeBasicHtml=function(e){return"string"!=typeof e?String(e):e.replace(/&/gi,"&amp;").replace(/>/gi,"&gt;").replace(/</gi,"&lt;").replace(/\n/gi,"<br />")},Axi.Util.encodeUTF8=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;++i){var r=e.charCodeAt(i);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},Axi.Util.qencode=function(e){e=e||"",e=Axi.Util.encodeUTF8(e);for(var t="",i=0;i<e.length;++i){var r=e.charAt(i),n=e.charCodeAt(i);(n>=127||n<32)&&(r=n.toString(16).toUpperCase(),r="="+r),"="==r?r="=3D":"?"==r?r="=3F":"_"==r?r="=5F":" "==r&&(r="_"),t+=r}return"=?utf-8?Q?"+t+"?="},Axi.Util.parseDateString=function(e){if(!e||-1==e.indexOf("T"))return new Date(e);if(e=e.split("T")[0],-1!=e.indexOf("-")){var t=e.split("-");return new Date(t[0],t[1]-1,t[2])}if(-1!=e.indexOf(".")){var t=e.split(".");return new Date(t[2],t[1]-1,t[0])}return new Date(e)},Axi.Util.UTCtoDateTime=function(e){if(!e)return"";var t=new Date;t.setTime(1e3*e);var i=t.getUTCHours(),r="";"12"==($SESSION.get("TimeFormat")||"12")&&(r=i>=12?" "+$T("Time_PM"):" "+$T("Time_AM"),i>12&&(i-=12)),i<10&&(i="0"+i);var n=t.getUTCMinutes();n<10&&(n="0"+n);var a=[$T("Time_Sun"),$T("Time_Mon"),$T("Time_Tue"),$T("Time_Wed"),$T("Time_Thu"),$T("Time_Fri"),$T("Time_Sat")],o=a[t.getUTCDay()],l=[$T("Time_Jan"),$T("Time_Feb"),$T("Time_Mar"),$T("Time_Apr"),$T("Time_May"),$T("Time_Jun"),$T("Time_Jul"),$T("Time_Aug"),$T("Time_Sep"),$T("Time_Oct"),$T("Time_Nov"),$T("Time_Dec")],s=l[t.getUTCMonth()],c=t.getUTCDate(),u=t.getUTCFullYear();return"month"==$SESSION.get("DateFormat")?o+", "+s+" "+c+", "+u+" "+i+":"+n+" "+r:o+", "+c+" "+s+" "+u+" "+i+":"+n+" "+r},Axi.Util.UTCtoSmartDate=function(e,t){if(!e)return"";var i=new Date;i.setTime(1e3*e);var r=i.getUTCHours(),n="";"12"==($SESSION.get("TimeFormat")||"12")&&(n=r>=12?" "+$T("Time_PM"):" "+$T("Time_AM"),r>12&&(r-=12)),r<10&&(r="0"+r);var a=i.getUTCMinutes();a<10&&(a="0"+a);var o=(i.getUTCSeconds(),[$T("Time_Sun"),$T("Time_Mon"),$T("Time_Tue"),$T("Time_Wed"),$T("Time_Thu"),$T("Time_Fri"),$T("Time_Sat")]),l=o[i.getUTCDay()],s=[$T("Time_Jan"),$T("Time_Feb"),$T("Time_Mar"),$T("Time_Apr"),$T("Time_May"),$T("Time_Jun"),$T("Time_Jul"),$T("Time_Aug"),$T("Time_Sep"),$T("Time_Oct"),$T("Time_Nov"),$T("Time_Dec")],c=s[i.getUTCMonth()],u=i.getUTCDate(),d=i.getUTCFullYear(),f="month"==$SESSION.get("DateFormat"),p=new Date;if(i.setUTCHours(0,0,0,0),p.setUTCHours(0,0,0,0),i.getTime()==p.getTime())return t?$T("Today"):r+":"+a+" "+n;if(p.setUTCDate(p.getUTCDate()-1),i.getTime()==p.getTime())return $T("Yesterday")+(t?"":", "+r+":"+a+" "+n);p.setUTCDate(p.getUTCDate()+1);var g=i.getUTCDay(),x=p.getUTCDay();return i.setUTCDate(i.getUTCDate()-g),p.setUTCDate(p.getUTCDate()-x),i.getTime()==p.getTime()?l+(t?"":", "+r+":"+a+" "+n):(i.setUTCDate(i.getUTCDate()+g),p.setUTCDate(p.getUTCDate()+x),i.setUTCDate(1),p.setUTCDate(1),i.getTime()==p.getTime()?f?l+", "+c+" "+u:l+", "+u+" "+c:(i.setUTCMonth(0),p.setUTCMonth(0),i.getTime()==p.getTime()?f?c+" "+u:u+" "+c:f?c+" "+u+", "+d:u+" "+c+" "+d))},Axi.Util.getEmailParts=function(e){if(!e)return[];"string"==typeof e&&(e=[e]);for(var t=[],i=0;i<e.length;i++){var r={name:"",email:""},n=e[i].lastIndexOf("<");if(-1==n)r.email=e[i];else{var a=e[i].slice(n);a=a.replace(/</g,"").replace(/>/g,"").trim(),r.email=a;var o=e[i].slice(0,n);o=o.replace(/"/g,"").trim(),r.name=o}t.push(r)}return t},Axi.Util.smartCommaSplit=function(e){if(!e)return[];var t=[];e=Axi.Util.stripQuotes(e);for(var i=e.split(/"/),r="",n=0;n<i.length;++n)if(i[n]&&i[n].trim()&&","!=i[n].trim())if(n%2)r='"'+i[n]+'"';else{for(var a=i[n].split(/ *[;,] */),o=[],l=0;l<a.length;++l)a[l]&&" "!=a[l]&&o.push(a[l]);o[0]=r+o[0],t=t.concat(o)}return t},Axi.Util.iterateRecipients=function(e,t,i){for(var r=Axi.Util.smartCommaSplit(Axi.Util.unescape(e)),n=Axi.Util.getEmailParts(r),a=0;a<n.length;a++){var o=n[a];if(o.name&&$T("NoName")==o.name&&(o.name=null),!1===t.call(i||this,o))break}},Axi.Util.getFileSubType=function(e,t,i){if("image"==e)return"x-axi-attachment-"+e;var r=i.match(/(.*)\.(.*)/);if(!r)return"x-axi-attachment-"+t;var n=r[r.length-1].toLowerCase(),a={doc:"doc",docx:"doc",xls:"xls",xlsx:"xls",ppt:"ppt",pptx:"ppt",pps:"ppt",mdb:"mdb",mdbx:"mdb",eml:"eml",rar:"rar",pdf:"pdf",zip:"zip",jpg:"image",jpeg:"image",gif:"image",png:"image",ico:"image",txt:"plain"};return a[n]?"x-axi-attachment-"+a[n]:"x-axi-attachment-"+t},Axi.Util.ddProxyIframePosition=function(e){function t(e){if(!this.dragCurrent)return!0;r(e),this.handleMouseUp(e)}function i(e){if(!this.dragCurrent)return!0;r(e),this.handleMouseMove(e)}function r(t){var i=n.documentElement.scrollTop||n.body.scrollTop,r=n.documentElement.scrollLeft||n.body.scrollLeft;t.xy=[t.xy[0]-r+e.getX(),t.xy[1]-i+e.getY()]}var n=Axi.Util.getDocument(e.dom);Ext.EventManager.on(n,"mousemove",i,Ext.dd.DragDropMgr,!0),Ext.EventManager.on(n,"mouseup",t,Ext.dd.DragDropMgr,!0)},Axi.Util.encodeKeyMap=function(e){for(var t=e.split("+"),i="",r=0;r<t.length;r++){var n=t[r].toLowerCase().trim();switch(n){case"enter":i+="E";break;case"shift":i+="S";break;case"alt":i+="A";break;case"esc":i+="X";break;case"delete":i+="D";break;case"ctrl":i+="C";break;default:i+=n}}return i},Axi.Util.decodeKeyMap=function(e){for(var t="",i=0;i<e.length;i++){var r=e.substr(i,1),n=!0;switch(r){case"E":t+="enter";break;case"S":t+="shift";break;case"A":t+="alt";break;case"X":t+="esc";break;case"D":t+="delete";break;case"C":t+="ctrl";break;default:t+=r.toLowerCase(),n=!1}n&&i<e.length-1&&(t+="+")}return t},Axi.Util.generateGreylistKey=function(){for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t="#",i=0;i<8;++i){var r=parseInt(1e3*Math.random())%e.length;t+=e.charAt(r)}return t},Axi.Util.toDate=function(e){return new Date(e.year,e.month-1,e.day,e.hour,e.min)},Axi.Util.toDateDay=function(e){var t;return t=e instanceof Date?new Date(e):Axi.Util.toDate(e),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},Axi.Util.toUTC=function(e){return e instanceof Date?Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),0):Date.UTC(e.year,e.month-1,e.day,e.hour,e.min,0,0)},Axi.Util.toDayUTC=function(e){return e instanceof Date?Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0,0):Date.UTC(e.year,e.month-1,e.day,0,0,0,0)},Axi.Util.diffMilli=function(e,t){var i=Axi.Util.toUTC(e);return Axi.Util.toUTC(t)-i},Axi.Util.diffDays=function(e,t){var i=Axi.Util.toDayUTC(e),r=Axi.Util.toDayUTC(t);return Math.abs((r-i)/864e5)},Axi.Util.normalToReversedFullName=function(e){var t=e.trim();if(!t)return"";var i=t.split(" ");if(1==i.length)return","==i[0].charAt(i[0].length-1)?i[0].substring(0,i[0].length-1):i[0];if(","==i[0].charAt(i[0].length-1))return t;arrIdx=i.length-1;for(var r=i[arrIdx]+",",n=0;n<arrIdx;++n)i[n]&&" "!=i[n]&&(r+=" "+i[n]);return r},Axi.Util.reversedToNormalFullName=function(e){var t=e.trim();if(!t)return"";var i=t.split(" ");if(1==i.length)return","==i[0].charAt(i[0].length-1)?i[0].substring(0,i[0].length-1):i[0];if(","!=i[0].charAt(i[0].length-1))return t;for(var r="",n=1;n<i.length;++n)i[n]&&" "!=i[n]&&(r+=i[n]+" ");return r+i[0].substring(0,i[0].length-1)},Axi.Util.aliasDictionary=null,Axi.Util.isMyAddress=function(e){if(!Axi.Util.aliasDictionary){if(!Axi.AccountInfo.aliases||!Axi.AccountInfo.aliases.length)return!1;Axi.Util.aliasDictionary={};for(var t=0;t<Axi.AccountInfo.aliases.length;++t){var i=Axi.AccountInfo.aliases[t].trim();Axi.Util.aliasDictionary[i]=!0}}for(var r=Axi.Util.getEmailParts(e),t=0;t<r.length;++t){var n=r[t].email;if(Axi.Util.aliasDictionary[n])return!0}return!1},Axi.Util.stripZws=function(e){if(1===e.nodeType){if(e=e.firstChild)do{Axi.Util.stripZws(e)}while(e=e.nextSibling)}else if(3===e.nodeType){var t=new RegExp(String.fromCharCode(8203),"g");e.data=e.data.replace(t,"")}},Axi.Util.getUrlParam=function(e,t,i){e=e||location.search;var r=new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)",i?"i":""),n=r.exec(e)||[null,""],a=n[1].replace(/\+/g,"%20");return decodeURIComponent(a)||null},Axi.Util.findFirstParent=function(e,t){for(var i=!1;e;){if(e.matches?i=e.matches(t):e.msMatchesSelector&&(i=e.msMatchesSelector(t)),i||"BODY"===e.nodeName)return e;e=e.parentNode}return e.ownerDocument.body},Axi.Util.extendSelectionLimits=function(e,t,i){var r,n,a,o=e.getSelection(),l=o.rangeCount&&o.getRangeAt(0).cloneRange(),s=l.cloneRange(),c=function(t){var i=Axi.Util.findFirstParent(t,"div, p, td, li, blockquote, address, h1, h2, h3, h4, h5, h6");return e.createTreeWalker(i,NodeFilter.SHOW_ALL,function(e){return e.hasChildNodes()?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},!0)},u=function(e,t,i){return e.hasChildNodes()&&e.childNodes[t-1]?u(e.childNodes[t-1],0,i):e},d=function(t,i){var r,n,o=!0,s=e.createRange(),u=0,d=c(t);if(d.currentNode=t,"BODY"!==t.nodeName)for(;o&&!(u++>1e3);)"start"===i?l.setStartBefore(t):l.setEndAfter(t),r=l.getBoundingClientRect(),n="start"===i&&d.previousNode()?d.currentNode:"end"===i&&d.nextNode()?d.currentNode:null,n&&"BR"!==n.nodeName?(s.setStartBefore(n),s.setEndAfter(n),a=s.getBoundingClientRect(),a.top<r.top&&a.bottom<=r.top||a.top>=r.bottom&&a.bottom>r.bottom?o=!1:t=n):o=!1,"BODY"===t.nodeName&&(o=!1);return"BODY"===t.nodeName&&(t=t["start"===i?"firstChild":"lastChild"]),t};if(l){if("end"!==i&&(r=u(l.startContainer,l.startOffset,"start"),
s.collapsed&&1===s.startContainer.nodeType&&s.startContainer.childNodes[s.startOffset]&&"BR"===s.startContainer.childNodes[s.startOffset].nodeName?l.setStartBefore(s.startContainer.childNodes[s.startOffset]):l.setStartBefore(d(r,"start"))),"start"!==i&&(n=u(l.endContainer,l.endOffset,"end"),s.collapsed&&1===s.endContainer.nodeType&&s.endContainer.childNodes[s.endOffset]&&"BR"===s.endContainer.childNodes[s.endOffset].nodeName?l.setEndAfter(s.endContainer.childNodes[s.endOffset]):l.setEndAfter(d(n,"end"))),t)return l;o.removeAllRanges(),o.addRange(l)}},Array.prototype.diff||(Array.prototype.diff=function(e){return this.filter(function(t){return e.indexOf(t)<0})}),Array.prototype.firstDiffIndex||(Array.prototype.firstDiffIndex=function(e){for(var t=0;t<this.length;++t)if(e.indexOf(this[t])<0)return t;return-1}),Array.prototype.containsString||(Array.prototype.containsString=function(e){for(var t=0;t<this.length;++t)if(this[t].indexOf(e)>-1)return!0;return!1});